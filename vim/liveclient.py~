import vim
import zmq

class LiveClient:
    
    def __init__(self,endpoint="tcp://127.0.0.1:4223"):

        self.context = zmq.Context()
        self.socket = self.context.socket(zmq.PUSH)

        self.socket.connect(endpoint)

    def send_buffer(self):

        data = '\n'.join(vim.current.buffer)
        self.socket.send_json({"shader":"fragment","data":data})
        
if __name__ == "__main__":

    liveclient = LiveClient()

